{
  "$schema": "https://opencode.ai/config.json",
  "provider": {
    "devstral": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Devstral External API",
      "options": {
        "baseURL": "{env:DEVSTRAL_BASE_URL}",
        "apiKey": "{env:DEVSTRAL_API_KEY}"
      },
      "models": {
        "small": {
          "name": "Devstral 2 Small",
          "id": "mistralai/Devstral-Small-2-24B-Instruct-2512"
        }
      }
    },
    "claude_external": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Claude External API",
      "options": {
        "baseURL": "{env:CLAUDE_BASE_URL}",
        "apiKey": "{env:CLAUDE_API_KEY}"
      },
      "models": {
        "sonnet45": {
          "name": "Claude 4.5 Sonnet",
          "id": "anthropic/claude-4-5-sonnet"
        }
      }
    }
  },
  "model": "devstral/small",
  "default_agent": "openagent",
  "instructions": ["AGENTS.md"],
  "plugin": ["opencode-pty"],
  "permission": {
    "edit": "ask",
    "bash": "ask"
  },
  "mcp": {
    "sequential-thinking": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-sequential-thinking"],
      "enabled": true
    },
    "context7": {
      "type": "local",
      "command": ["npx", "-y", "@upstash/context7-mcp"],
      "enabled": true
    },
    "memory": {
      "type": "local",
      "command": ["npx", "-y", "@modelcontextprotocol/server-memory"],
      "enabled": true
    }
  },
  "agent": {
    "openagent": {
      "model": "claude_external/sonnet45",
      "mode": "primary",
      "description": "Primary OpenAgentsControl coordinator for planning, routing, and approval-gated execution.",
      "prompt": "{file:agents/openagent.md}",
      "max_steps": 16,
      "tools": {
        "edit": true,
        "bash": true,
        "mcp__*": false,
        "mcp__context7__*": true,
        "websearch": true
      }
    },
    "opencoder": {
      "model": "claude_external/sonnet45",
      "mode": "primary",
      "description": "High-accuracy implementation agent for complex coding and code synthesis.",
      "prompt": "{file:agents/opencoder.md}",
      "max_steps": 24,
      "tools": {
        "edit": true,
        "bash": true,
        "mcp__*": false,
        "mcp__context7__*": true,
        "websearch": true
      }
    },
    "system-builder": {
      "model": "devstral/small",
      "mode": "primary",
      "description": "Meta-level planner for reusable system workflows, skills, and standards.",
      "prompt": "{file:agents/system-builder.md}",
      "max_steps": 10,
      "tools": {
        "edit": false,
        "bash": false,
        "mcp__sequential-thinking__*": true,
        "websearch": true
      }
    },
    "researcher": {
      "model": "devstral/small",
      "mode": "subagent",
      "description": "Evidence-first analyst for API checks, docs lookup, and bug research.",
      "prompt": "{file:agents/researcher.md}",
      "max_steps": 12,
      "tools": {
        "edit": false,
        "bash": false,
        "mcp__sequential-thinking__*": true,
        "mcp__context7__*": true,
        "websearch": true
      }
    },
    "test-pilot": {
      "model": "devstral/small",
      "mode": "subagent",
      "description": "Test execution and failure analysis specialist.",
      "prompt": "{file:agents/test-pilot.md}",
      "max_steps": 12,
      "tools": {
        "edit": false,
        "bash": true,
        "mcp__sequential-thinking__*": true,
        "websearch": true
      }
    },
    "explainer": {
      "model": "devstral/small",
      "mode": "subagent",
      "description": "Compresses large code or docs into concise, actionable summaries.",
      "prompt": "{file:agents/explainer.md}",
      "max_steps": 10,
      "tools": {
        "edit": false,
        "bash": false,
        "mcp__sequential-thinking__*": true,
        "mcp__context7__*": true,
        "websearch": false
      }
    }
  }
}
